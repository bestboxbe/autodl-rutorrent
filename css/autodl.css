/* Modernized autodl-irssi CSS */

/* --- Variables & Theming --- */
:root {
    --autodl-bg: var(--dialog-bg-color, #ffffff);
    --autodl-text: var(--main-text-color, #000000);
    --autodl-border: var(--menu-border-color, #ccc);
    --autodl-input-bg: var(--menu-background-color, #ffffff);
    --autodl-hover: var(--menu-highlight-background-color, #e0e0e0);
    --autodl-header-height: 3rem;
    --autodl-footer-height: 3rem;
}

/* --- Base Layout (Flexbox) --- */

/* 1. Top Level Dialog Window */
.dlg-window#autodl-ircsrvs,
.dlg-window#autodl-help,
.dlg-window#autodl-multiselect {
    display: flex;
    flex-direction: column;
    background-color: var(--autodl-bg);
}

.dlg-window#autodl-filters,
.dlg-window#autodl-preferences,
.dlg-window#autodl-trackers,
.dlg-window#autodl-servers,
.dlg-window#autodl-ircsrvs {
    /* Fix: Constrain modal size */
    width: 750px;
    height: 550px;
    max-width: 95vw;
    max-height: 95vh;
}

/* 2. Content Container (Inner Div) */
/* Flexbox Row: Left List | Right Content */
/* 2. Content Container (Inner Div) */
/* Main Wrapper: Flex Column (Header/Grid/Footer) */
.autodl-main-layout {
    display: flex;
    flex-direction: column;
    width: 100%;
    height: 100%;
    overflow: hidden;
    background-color: var(--autodl-bg);
}

/* Grid Content: Flex Row (Left List | Right Details) */
.autodl-main-layout .autodl-grid-content {
    flex: 1;
    display: flex;
    flex-direction: row;
    overflow: hidden;
    min-height: 0;
    /* Important for nested scrolling */
    border-bottom: 1px solid var(--autodl-border);
}

/* Single Content: Flex Column (For Preferences) */
.autodl-main-layout .autodl-single-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    min-height: 0;
    border-bottom: 1px solid var(--autodl-border);
}

/* 3. Bottom Buttons (Footer) */
.autodl-actions-footer {
    flex: 0 0 auto;
    display: flex;
    flex-direction: row;
    justify-content: flex-end;
    align-items: center;
    padding: 10px;
    background-color: var(--autodl-bg);
    border-top: 1px solid var(--autodl-border);
    width: 100%;
    box-sizing: border-box;
}

/* Legacy support or overrides if needed */
/* Legacy support or overrides if needed */
.dlg-window#autodl-filters .dialog-buttons,
.dlg-window#autodl-preferences .dialog-buttons,
.dlg-window#autodl-trackers .dialog-buttons,
.dlg-window#autodl-servers .dialog-buttons,
.dlg-window#autodl-ircsrvs .dialog-buttons,
.dlg-window#autodl-help .dialog-buttons,
.dlg-window#autodl-filters .buttons-list,
.dlg-window#autodl-preferences .buttons-list,
.dlg-window#autodl-trackers .buttons-list,
.dlg-window#autodl-servers .buttons-list,
.dlg-window#autodl-ircsrvs .buttons-list,
.dlg-window#autodl-help .buttons-list {
    display: none !important;
}

/* --- Left/Right Panes (Flex Items) --- */
#autodl-filters-left,
#autodl-trackers-left,
#autodl-ircsrvs-left,
#autodl-servers-left {
    flex: 0 0 220px;
    /* Fixed Width */
    display: flex;
    flex-direction: column;
    padding: 10px;
    border-right: 1px solid var(--autodl-border);
    background-color: var(--autodl-bg);
    overflow: hidden;
    height: 100%;
    box-sizing: border-box;
}

#autodl-trackers-right,
#autodl-ircsrvs-right,
#autodl-servers-right {
    flex: 1;
    /* REST of the space */
    padding: 15px;
    overflow-y: auto;
    background-color: var(--autodl-bg);
    height: 100%;
    min-width: 0;
    box-sizing: border-box;
}

/* Fix for Filters Tab Layout */
#autodl-filters-right {
    flex: 1;
    /* Added to ensure it fills the space */
    display: flex !important;
    flex-direction: column !important;
    padding: 0 !important;
    overflow: hidden !important;
    /* Restore missing props from shared rule */
    background-color: var(--autodl-bg);
    height: 100%;
    min-width: 0;
    box-sizing: border-box;
}

#autodl-filters-tabs {
    flex: 0 0 auto;
    width: 100%;
}

#autodl-filters-contents {
    flex: 1;
    overflow-y: auto;
    padding: 15px;
}

/* Preferences Specific Areas */
#autodl-prefs-tabs {
    flex: 0 0 auto;
    background-color: var(--autodl-bg);
}

#autodl-prefs-contents {
    flex: 1;
    padding: 10px;
    overflow-y: auto;
}

/* --- Text & Paragraph Styling --- */
/* Fix for text overflow - scoped to autodl */
.autodl-main-layout p {
    white-space: normal;
    word-break: break-word;
    overflow-wrap: break-word;
    line-height: 1.5;
    margin-bottom: 15px;
    max-width: 100%;
    color: var(--autodl-text);
}

/* Links inside text - scoped to autodl */
.autodl-main-layout p a {
    color: var(--autodl-text);
    text-decoration: underline;
}

/* Fieldset styling - scoped to autodl */
.autodl-main-layout fieldset {
    border: 1px solid var(--autodl-border);
    margin: 0 0 10px 0;
    padding: 10px;
    border-radius: 4px;
    min-width: 0;
    width: 100%;
    box-sizing: border-box;
}

.autodl-main-layout legend {
    color: var(--autodl-text);
    padding: 0 5px;
    font-weight: bold;
}

/* --- Components --- */

/* ListBoxes */
#autodl-filters-list,
#autodl-trackers-list,
#autodl-ircsrvs-list,
#autodl-servers-list {
    flex: 1;
    width: 100%;
    height: 100%;
    border: 1px solid var(--autodl-border);
    background-color: var(--autodl-input-bg);
    overflow-y: auto;
    margin-bottom: 5px;
    box-sizing: border-box;
}

/* IRC Servers Buttons */
#autodl-ircsrvs-list-buttons,
#autodl-filters-list-buttons {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 5px;
    width: 100%;
    flex: 0 0 auto;
}

#autodl-ircsrvs-list-buttons>div,
#autodl-filters-list-buttons>div {
    display: flex;
    gap: 5px;
    flex-wrap: wrap;
    justify-content: center;
}

/* --- Toolbar Icon --- */
/* Pointing to the correct image in ../img/ */
#autodl-tb,
div#autodl-tb.nav-icon,
.nav-icon.autodl-tb-icon {
    background-image: url('../img/prefs_std.gif') !important;
    /* FIXED PATH */
    background-repeat: no-repeat;
    background-position: center center;
    background-size: contain;
    width: 24px;
    height: 24px;
    display: inline-block;
    vertical-align: middle;
}

/* List Item Styling */
.autodl-listbox-item {
    padding: 2px 5px;
    cursor: default;
    color: var(--autodl-text);
}

.autodl-listbox-item:hover {
    background-color: var(--autodl-hover);
}

.autodl-listbox-item-selected {
    background-color: var(--menu-highlight-background-color, #bedbf4);
    color: var(--main-text-color, #000);
}

/* Buttons - scoped to autodl */
.autodl-main-layout .Button {
    margin: 2px;
}

/* Inputs & Textboxes - scoped to autodl */
.autodl-main-layout input[type="text"],
.autodl-main-layout input[type="password"],
.autodl-main-layout select {
    background-color: var(--autodl-input-bg);
    color: var(--autodl-text);
    border: 1px solid var(--autodl-border);
    padding: 2px;
}

/* Textbox sizing utility classes - scoped to autodl */
.autodl-main-layout .textbox-3 {
    width: 3em;
}

.autodl-main-layout .textbox-5 {
    width: 5em;
}

.autodl-main-layout .textbox-7 {
    width: 7em;
}

.autodl-main-layout .textbox-10 {
    width: 10em;
}

.autodl-main-layout .textbox-12 {
    width: 12em;
}

.autodl-main-layout .textbox-18 {
    width: 18em;
}

.autodl-main-layout .textbox-20 {
    width: 22em;
}

.autodl-main-layout .textbox-22 {
    width: 24em;
}

.autodl-main-layout .textbox-23 {
    width: 25em;
}

/* Tabs (Generalized) - scoped to autodl */
.autodl-main-layout ul.tabbar {
    display: flex;
    flex-direction: row;
    list-style: none;
    margin: 0;
    padding: 0;
    border-bottom: 1px solid var(--autodl-border);
}

.autodl-main-layout ul.tabbar li {
    margin: 0;
    padding: 0;
    margin-right: 2px;
    list-style-type: none !important;
}

.autodl-main-layout ul.tabbar li a {
    display: block;
    padding: 5px 10px;
    text-decoration: none;
    background-color: var(--autodl-bg);
    border: 1px solid var(--autodl-border);
    border-bottom: none;
    color: var(--autodl-text);
    cursor: pointer;
    white-space: nowrap;
}

.autodl-main-layout ul.tabbar li.selected a {
    background-color: var(--autodl-hover);
    font-weight: bold;
    border-bottom: 2px solid var(--autodl-hover);
}

/* Log View */
#autodl-irssi-log {
    flex: 1;
    width: 100%;
    height: 100%;
    overflow-y: auto;
    font-family: monospace;
    background-color: var(--autodl-input-bg);
    color: var(--autodl-text);
    padding: 10px;
    box-sizing: border-box;
}

.autodl-line-time {
    color: #888;
    padding-right: 5px;
    white-space: nowrap;
}

.autodl-line-sep {
    padding: 0 5px;
    color: #888;
}

.autodl-line-text {
    flex: 1;
    color: var(--autodl-text);
}

/* IRC log formatting */
.autodl-bold {
    font-weight: bold;
}

.autodl-underline {
    text-decoration: underline;
}

.autodl-fg-0 {
    color: #FFFFFF;
}

.autodl-fg-1 {
    color: #000000;
}

.autodl-fg-2 {
    color: #0000FF;
}

.autodl-fg-3 {
    color: #008000;
}

.autodl-fg-4 {
    color: #FF0000;
}

.autodl-fg-5 {
    color: #A52A2A;
}

.autodl-fg-6 {
    color: #800080;
}

.autodl-fg-7 {
    color: #FFA500;
}

.autodl-fg-8 {
    color: #8A5C2E;
}

.autodl-fg-9 {
    color: #599400;
}

.autodl-fg-10 {
    color: #0080FF;
}

.autodl-fg-11 {
    color: #6666FF;
}

.autodl-fg-12 {
    color: #57AECB;
}

.autodl-fg-13 {
    color: #FF4766;
}

.autodl-fg-14 {
    color: #808080;
}

.autodl-fg-15 {
    color: #ADADAD;
}

.autodl-bg-0 {
    background-color: #FFFFFF;
}

.autodl-bg-1 {
    background-color: #000000;
}

.autodl-bg-2 {
    background-color: #0000FF;
}

.autodl-bg-3 {
    background-color: #008000;
}

.autodl-bg-4 {
    background-color: #FF0000;
}

.autodl-bg-5 {
    background-color: #A52A2A;
}

.autodl-bg-6 {
    background-color: #800080;
}

.autodl-bg-7 {
    background-color: #FFA500;
}

.autodl-bg-8 {
    background-color: #8A5C2E;
}

.autodl-bg-9 {
    background-color: #599400;
}

.autodl-bg-10 {
    background-color: #0080FF;
}

.autodl-bg-11 {
    background-color: #6666FF;
}

.autodl-bg-12 {
    background-color: #57AECB;
}

.autodl-bg-13 {
    background-color: #FF4766;
}

.autodl-bg-14 {
    background-color: #808080;
}

.autodl-bg-15 {
    background-color: #ADADAD;
}

.autodl-fg-as-bg {
    background-color: var(--autodl-text);
}

.autodl-bg-as-fg {
    color: var(--autodl-input-bg);
}

#autodl-irssi-log tr:hover {
    background-color: var(--autodl-hover);
}

/* --- Responsive Adjustments --- */
@media (max-width: 768px) {

    /* Change grid to column layout on mobile */
    .autodl-main-layout .autodl-grid-content {
        flex-direction: column !important;
    }

    /* Left panels: reduce height, full width */
    #autodl-filters-left,
    #autodl-trackers-left,
    #autodl-ircsrvs-left,
    #autodl-servers-left {
        flex: 0 0 auto;
        border-right: none;
        border-bottom: 1px solid var(--autodl-border);
        height: 200px;
        width: 100%;
    }

    /* Right panels: ensure they're visible and scrollable */
    #autodl-filters-right,
    #autodl-trackers-right,
    #autodl-ircsrvs-right,
    #autodl-servers-right {
        flex: 1;
        width: 100%;
        height: auto;
        min-height: 300px;
    }

    /* Enable horizontal scrolling for tabs on mobile */
    #autodl-filters-tabs,
    #autodl-prefs-tabs {
        overflow-x: auto;
        overflow-y: hidden;
    }

    #autodl-filters-tabs ul.tabbar,
    #autodl-prefs-tabs ul.tabbar {
        flex-wrap: nowrap;
        min-width: min-content;
    }
}